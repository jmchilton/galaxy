{"version":3,"file":"tools.js","sources":["../../src/mvc/tools.js"],"names":["define","_","util","data","VisibilityMixin","hidden","show","this","set","hide","toggle","get","is_visible","attributes","ToolParameter","Backbone","Model","extend","defaults","name","label","type","value","html","num_samples","initialize","unescape","copy","toJSON","set_value","ToolParameterCollection","Collection","model","DataToolParameter","IntegerToolParameter","parseInt","get_samples","d3","scale","linear","domain","ticks","FloatToolParameter","parseFloat","SelectToolParameter","map","option","subModelTypes","integer","float","select","Tool","id","description","target","inputs","outputs","urlRoot","galaxy_config","root","options","p","p_class","rval","prototype","call","i","remove_inputs","types","tool","incompatible_inputs","filter","input","indexOf","remove","only_samplable_inputs","valid_inputs","each","push","apply_search_results","results","set_input_value","find","set_input_values","inputs_dict","self","keys","input_name","run","_run","rerun","target_dataset","regions","action","target_dataset_id","get_inputs_dict","input_dict","additional_params","payload","tool_id","run_deferred","$","Deferred","ss_deferred","ServerStateDeferred","ajax_settings","url","JSON","stringify","dataType","contentType","interval","success_fn","response","when","go","then","result","resolve","DatasetCollection","reset","ToolCollection","View","ToolSectionLabel","ToolSection","elems","open","clear_search_results","elt","cur_label","all_hidden","ToolSearch","search_hint_string","min_chars_for_search","spinner_url","clear_btn_url","search_url","visible","query","clear_key","on","do_search","length","q","timer","clearTimeout","setTimeout","ga","clear_search","ToolPanel","tool_search","tools","layout","parse","parse_elt","elt_dict","model_class","panel_elt","BaseView","update_visible","$el","ToolLinkView","tagName","render","$link","append","Handlebars","templates","tool_link","e","preventDefault","Galaxy","upload","ToolSectionLabelView","className","text","ToolSectionView","update_open","panel_section","section_body","tool_view","label_view","events","click .toolSectionTitle > a","children","slideDown","slideUp","ToolSearchView","click","keyup :input","click #search-clear-btn","tooltip","focus_and_select","focus","clear","val","query_changed","evData","which","ToolPanelView","handle_search_results","search_view","section_title_view","attr","split","trigger","ToolFormView","tool_form","tool_panel_view","collection","tool_form_view","css","show_tool","fetch","done","width"],"mappings":"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"}