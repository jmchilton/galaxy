{"version":3,"file":"workflow-manager.js","sources":["../../../src/mvc/workflow/workflow-manager.js"],"names":["define","Connector","Toastr","Workflow","app","canvas_container","this","id_counter","nodes","name","has_changes","active_form_has_changes","workflowOutputLabels","$","extend","prototype","canLabelOutputWith","label","registerOutputLabel","unregisterOutputLabel","updateOutputLabel","fromLabel","toLabel","warning","attemptUpdateOutputLabel","node","outputName","labelWorkflowOutput","nodeView","redrawWorkflowOutputs","create_node","type","title_text","content_id","prebuildNode","add_node","fit_canvas_to_nodes","canvas_manager","draw_overview","activate_node","id","element","attr","workflow","remove_node","active_node","clear_active_node","remove_all","wf","each","k","v","destroy","rectify_workflow_outputs","using_workflow_outputs","has_existing_pjas","workflow_outputs","length","post_job_actions","pja_id","pja","action_type","self","node_changed","pjas_to_rem","push","i","pja_name","output_terminals","ot_id","ot","create_pja","isWorkflowOutput","output_name","action_arguments","reload_active_node","to_simple","input_connections","input_terminals","t","cons","connectors","c","handle1","con_dict","input_subworkflow_step_id","attributes","input","undefined","act","node_data","tool_state","errors","position","annotation","uuid","steps","from_simple","data","initialImport_","initialImport","offset","Object","keys","max_id","step","workflow_output","init_field_data","css","top","left","parseInt","Math","max","isArray","l","x","other_node","connect","redraw","addWorkflowOutput","callout","find","Galaxy","root","check_changes_in_active_form","submit","make_inactive","showAttributes","showForm","config_form","make_active","force","showWorkflowParameters","layout","n_pred","successors","j","other","node_ids_by_level","level_parents","pred_k","sk","all_nodes","h_pad","v_pad","ids","sort","a","b","max_width","width","height","_","bounds_for_all_nodes","p","xmin","xmax","ymin","ymax","e","min","round_up","n","ceil","fix_delta","new_pos","bounds","parent","xmin_delta","ymin_delta","children"],"mappings":"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"}